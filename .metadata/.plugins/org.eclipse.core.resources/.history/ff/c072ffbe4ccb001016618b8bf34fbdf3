/*
 * main.c
 *
 *  Created on: 2-03-2011
 *      Author: Maciek
 *      Kolejny przyk³ad
 */

#include <avr/io.h>
#include <util/delay.h>

//Knfiguracja sprzêtowa: do portu B podpiête s¹ 4 diody do pinów 0-3

//Dobrze jest na pocz¹tku okreliæ po³¹czenia w poni¿szy sposób, w razie zmiany
//konfiguracji sprzêtowej ³atwiej jest zaminiæ dane w jednym miejscu ni¿ w 50 :)
#define LED_DIR DDRB
#define LED_P   PORTB

int main()
{
	//Inicjalizacja portów
	LED_DIR = 0xFF;
	LED_P = 0x00;
	uint8_t szybkosc = 2000;
	while(szybkosc<200)
	{


					//Zapal pierwsz¹ diodê
					LED_P ^= (1<<0);
					_delay_ms(szybkosc);

					//Zapal 3 diodê
					LED_P ^= (1<<1);
					_delay_ms(szybkosc);

					//Prze³¹cz (zgaœ) pierwsz¹ diodê
					LED_P ^= (1<<2);
					_delay_ms(szybkosc);

					// Zgaœ 3 diodê
					LED_P ^= (1<<7);
					_delay_ms(szybkosc);

//					//Zapal pierwsz¹ diodê
//					LED_P ^= (1<<0);
//					_delay_ms(szybkosc);
//
//					//Zapal 3 diodê
//					LED_P ^= (1<<1);
//					_delay_ms(szybkosc);
//
//					//Prze³¹cz (zgaœ) pierwsz¹ diodê
//					LED_P ^= (1<<2);
//					_delay_ms(szybkosc);
//
//					// Zgaœ 3 diodê
//					LED_P ^= (1<<7);
//					_delay_ms(szybkosc);

//					if (szybkosc == 200)
//						szybkosc = 2000;
//					else
						szybkosc = szybkosc - 200;

	}
	for(;;);


}
